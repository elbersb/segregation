<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate total segregation for M and H — mutual_total • segregation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate total segregation for M and H — mutual_total" />
<meta property="og:description" content="Returns the total segregation between group and unit.
If within is given, calculates segregation within each
within category separately, and takes the weighted average.
Also see mutual_within for detailed within calculations." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">segregation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/segregation.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/elbersb/segregation/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate total segregation for M and H</h1>
    <small class="dont-index">Source: <a href='https://github.com/elbersb/segregation/blob/master/R/mutual.R'><code>R/mutual.R</code></a></small>
    <div class="hidden name"><code>mutual_total.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns the total segregation between <code>group</code> and <code>unit</code>.
If <code>within</code> is given, calculates segregation within each
<code>within</code> category separately, and takes the weighted average.
Also see <code><a href='mutual_within.html'>mutual_within</a></code> for detailed within calculations.</p>
    </div>

    <pre class="usage"><span class='fu'>mutual_total</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>group</span>,
  <span class='va'>unit</span>,
  within <span class='op'>=</span> <span class='cn'>NULL</span>,
  weight <span class='op'>=</span> <span class='cn'>NULL</span>,
  se <span class='op'>=</span> <span class='cn'>FALSE</span>,
  CI <span class='op'>=</span> <span class='fl'>0.95</span>,
  n_bootstrap <span class='op'>=</span> <span class='fl'>100</span>,
  base <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame.</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>A categorical variable or a vector of variables
contained in <code>data</code>. Defines the first dimension
over which segregation is computed.</p></td>
    </tr>
    <tr>
      <th>unit</th>
      <td><p>A categorical variable or a vector of variables
contained in <code>data</code>. Defines the second dimension
over which segregation is computed.</p></td>
    </tr>
    <tr>
      <th>within</th>
      <td><p>A categorical variable or a vector of variables
contained in <code>data</code>. The variable(s) should be a superset of either
the <code>unit</code> or the <code>group</code> for the calculation to be meaningful.
If provided, segregation is
computed within the groups defined by the variable, and then averaged.
(Default <code>NULL</code>)</p></td>
    </tr>
    <tr>
      <th>weight</th>
      <td><p>Numeric. (Default <code>NULL</code>)</p></td>
    </tr>
    <tr>
      <th>se</th>
      <td><p>If <code>TRUE</code>, the segregation estimates are bootstrapped to provide
standard errors and to apply bias correction. The bias that is reported
has already been applied to the estimates (i.e. the reported estimates are "debiased")
(Default <code>FALSE</code>)</p></td>
    </tr>
    <tr>
      <th>CI</th>
      <td><p>If <code>se = TRUE</code>, compute the confidence (CI*100)<!-- % confidence interval -->
in addition to the bootstrap standard error.
This is based on percentiles of the bootstrap distribution, and a valid interpretation
relies on a larger number of bootstrap iterations. (Default <code>0.95</code>)</p></td>
    </tr>
    <tr>
      <th>n_bootstrap</th>
      <td><p>Number of bootstrap iterations. (Default <code>100</code>)</p></td>
    </tr>
    <tr>
      <th>base</th>
      <td><p>Base of the logarithm that is used in the calculation.
Defaults to the natural logarithm.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data.table with two rows. The column <code>est</code> contains
  the Mutual Information Index, M, and Theil's Entropy Index, H. The H is the
  the M divided by the <code>group</code> entropy. If <code>within</code> was given,
  M and H are weighted averages of the within-category segregation scores.
  If <code>se</code> is set to <code>TRUE</code>, an additional column <code>se</code> contains
  the associated bootstrapped standard errors, an additional column <code>CI</code> contains
  the estimate confidence interval as a list column, an additional column <code>bias</code> contains
  the estimated bias, and the column <code>est</code> contains the bias-corrected estimates.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Henri Theil. 1971. Principles of Econometrics. New York: Wiley.</p>
<p>Ricardo Mora and Javier Ruiz-Castillo. 2011.
     "Entropy-based Segregation Indices". Sociological Methodology 41(1): 159–194.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># calculate school racial segregation</span>
<span class='fu'>mutual_total</span><span class='op'>(</span><span class='va'>schools00</span>, <span class='st'>"school"</span>, <span class='st'>"race"</span>, weight <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span> <span class='co'># M =&gt; .425</span>
</div><div class='output co'>#&gt;    stat        est
#&gt; 1:    M 0.42553898
#&gt; 2:    H 0.05642991</div><div class='input'>
<span class='co'># note that the definition of groups and units is arbitrary</span>
<span class='fu'>mutual_total</span><span class='op'>(</span><span class='va'>schools00</span>, <span class='st'>"race"</span>, <span class='st'>"school"</span>, weight <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span> <span class='co'># M =&gt; .425</span>
</div><div class='output co'>#&gt;    stat       est
#&gt; 1:    M 0.4255390
#&gt; 2:    H 0.4188083</div><div class='input'>
<span class='co'># if groups or units are defined by a combination of variables,</span>
<span class='co'># vectors of variable names can be provided -</span>
<span class='co'># here there is no difference, because schools</span>
<span class='co'># are nested within districts</span>
<span class='fu'>mutual_total</span><span class='op'>(</span><span class='va'>schools00</span>, <span class='st'>"race"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"district"</span>, <span class='st'>"school"</span><span class='op'>)</span>,
             weight <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span> <span class='co'># M =&gt; .424</span>
</div><div class='output co'>#&gt;    stat       est
#&gt; 1:    M 0.4255390
#&gt; 2:    H 0.4188083</div><div class='input'>
<span class='co'># estimate standard errors and 95% CI for M and H</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'>mutual_total</span><span class='op'>(</span><span class='va'>schools00</span>, <span class='st'>"race"</span>, <span class='st'>"school"</span>, weight <span class='op'>=</span> <span class='st'>"n"</span>,
             se <span class='op'>=</span> <span class='cn'>TRUE</span>, n_bootstrap <span class='op'>=</span> <span class='fl'>1000</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># estimate segregation within school districts</span>
<span class='fu'>mutual_total</span><span class='op'>(</span><span class='va'>schools00</span>, <span class='st'>"race"</span>, <span class='st'>"school"</span>,
             within <span class='op'>=</span> <span class='st'>"district"</span>, weight <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span> <span class='co'># M =&gt; .087</span>
</div><div class='output co'>#&gt;    stat        est
#&gt; 1:    M 0.08758648
#&gt; 2:    H 0.08620114</div><div class='input'>
<span class='co'># estimate between-district racial segregation</span>
<span class='fu'>mutual_total</span><span class='op'>(</span><span class='va'>schools00</span>, <span class='st'>"race"</span>, <span class='st'>"district"</span>, weight <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span> <span class='co'># M =&gt; .338</span>
</div><div class='output co'>#&gt;    stat       est
#&gt; 1:    M 0.3379525
#&gt; 2:    H 0.3326072</div><div class='input'><span class='co'># note that the sum of within-district and between-district</span>
<span class='co'># segregation equals total school-race segregation;</span>
<span class='co'># here, most segregation is between school districts</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Benjamin Elbers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


