<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculates the Mutual Information Index M and Theil's Entropy Index H — mutual_total • segregation</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculates the Mutual Information Index M and Theil's Entropy Index H — mutual_total"><meta name="description" content="Returns the total segregation between group and unit.
If within is given, calculates segregation within each
within category separately, and takes the weighted average.
Also see mutual_within for detailed within calculations."><meta property="og:description" content="Returns the total segregation between group and unit.
If within is given, calculates segregation within each
within category separately, and takes the weighted average.
Also see mutual_within for detailed within calculations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">segregation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/segregation.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
    <li><a class="dropdown-item" href="../articles/plotting.html">Visualizing and compressing segregation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/elbersb/segregation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculates the Mutual Information Index M and Theil's Entropy Index H</h1>
      <small class="dont-index">Source: <a href="https://github.com/elbersb/segregation/blob/master/R/mutual.R" class="external-link"><code>R/mutual.R</code></a></small>
      <div class="d-none name"><code>mutual_total.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns the total segregation between <code>group</code> and <code>unit</code>.
If <code>within</code> is given, calculates segregation within each
<code>within</code> category separately, and takes the weighted average.
Also see <code><a href="mutual_within.html">mutual_within</a></code> for detailed within calculations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mutual_total</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">group</span>,</span>
<span>  <span class="va">unit</span>,</span>
<span>  within <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  CI <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  n_bootstrap <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  base <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>A categorical variable or a vector of variables
contained in <code>data</code>. Defines the first dimension
over which segregation is computed.</p></dd>


<dt id="arg-unit">unit<a class="anchor" aria-label="anchor" href="#arg-unit"></a></dt>
<dd><p>A categorical variable or a vector of variables
contained in <code>data</code>. Defines the second dimension
over which segregation is computed.</p></dd>


<dt id="arg-within">within<a class="anchor" aria-label="anchor" href="#arg-within"></a></dt>
<dd><p>A categorical variable or a vector of variables
contained in <code>data</code>. The variable(s) should be a superset of either
the <code>unit</code> or the <code>group</code> for the calculation to be meaningful.
If provided, segregation is
computed within the groups defined by the variable, and then averaged.
(Default <code>NULL</code>)</p></dd>


<dt id="arg-weight">weight<a class="anchor" aria-label="anchor" href="#arg-weight"></a></dt>
<dd><p>Numeric. (Default <code>NULL</code>)</p></dd>


<dt id="arg-se">se<a class="anchor" aria-label="anchor" href="#arg-se"></a></dt>
<dd><p>If <code>TRUE</code>, the segregation estimates are bootstrapped to provide
standard errors and to apply bias correction. The bias that is reported
has already been applied to the estimates (i.e. the reported estimates are "debiased")
(Default <code>FALSE</code>)</p></dd>


<dt id="arg-ci">CI<a class="anchor" aria-label="anchor" href="#arg-ci"></a></dt>
<dd><p>If <code>se = TRUE</code>, compute the confidence (CI*100)<!-- % confidence interval -->
in addition to the bootstrap standard error.
This is based on percentiles of the bootstrap distribution, and a valid interpretation
relies on a larger number of bootstrap iterations. (Default <code>0.95</code>)</p></dd>


<dt id="arg-n-bootstrap">n_bootstrap<a class="anchor" aria-label="anchor" href="#arg-n-bootstrap"></a></dt>
<dd><p>Number of bootstrap iterations. (Default <code>100</code>)</p></dd>


<dt id="arg-base">base<a class="anchor" aria-label="anchor" href="#arg-base"></a></dt>
<dd><p>Base of the logarithm that is used in the calculation.
Defaults to the natural logarithm.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a data.table with two rows. The column <code>est</code> contains
  the Mutual Information Index, M, and Theil's Entropy Index, H. The H is the
  the M divided by the <code>group</code> entropy. If <code>within</code> was given,
  M and H are weighted averages of the within-category segregation scores.
  If <code>se</code> is set to <code>TRUE</code>, an additional column <code>se</code> contains
  the associated bootstrapped standard errors, an additional column <code>CI</code> contains
  the estimate confidence interval as a list column, an additional column <code>bias</code> contains
  the estimated bias, and the column <code>est</code> contains the bias-corrected estimates.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Henri Theil. 1971. Principles of Econometrics. New York: Wiley.</p>
<p>Ricardo Mora and Javier Ruiz-Castillo. 2011.
     "Entropy-based Segregation Indices". Sociological Methodology 41(1): 159–194.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># calculate school racial segregation</span></span></span>
<span class="r-in"><span><span class="fu">mutual_total</span><span class="op">(</span><span class="va">schools00</span>, <span class="st">"school"</span>, <span class="st">"race"</span>, weight <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span> <span class="co"># M =&gt; .425</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      stat        est</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      M 0.42553898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      H 0.05642991</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># note that the definition of groups and units is arbitrary</span></span></span>
<span class="r-in"><span><span class="fu">mutual_total</span><span class="op">(</span><span class="va">schools00</span>, <span class="st">"race"</span>, <span class="st">"school"</span>, weight <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span> <span class="co"># M =&gt; .425</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      stat       est</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      M 0.4255390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      H 0.4188083</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if groups or units are defined by a combination of variables,</span></span></span>
<span class="r-in"><span><span class="co"># vectors of variable names can be provided -</span></span></span>
<span class="r-in"><span><span class="co"># here there is no difference, because schools</span></span></span>
<span class="r-in"><span><span class="co"># are nested within districts</span></span></span>
<span class="r-in"><span><span class="fu">mutual_total</span><span class="op">(</span><span class="va">schools00</span>, <span class="st">"race"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"district"</span>, <span class="st">"school"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    weight <span class="op">=</span> <span class="st">"n"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="co"># M =&gt; .424</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      stat       est</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      M 0.4255390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      H 0.4188083</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate standard errors and 95% CI for M and H</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">mutual_total</span><span class="op">(</span><span class="va">schools00</span>, <span class="st">"race"</span>, <span class="st">"school"</span>,</span></span>
<span class="r-in"><span>    weight <span class="op">=</span> <span class="st">"n"</span>,</span></span>
<span class="r-in"><span>    se <span class="op">=</span> <span class="cn">TRUE</span>, n_bootstrap <span class="op">=</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate segregation within school districts</span></span></span>
<span class="r-in"><span><span class="fu">mutual_total</span><span class="op">(</span><span class="va">schools00</span>, <span class="st">"race"</span>, <span class="st">"school"</span>,</span></span>
<span class="r-in"><span>    within <span class="op">=</span> <span class="st">"district"</span>, weight <span class="op">=</span> <span class="st">"n"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="co"># M =&gt; .087</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate between-district racial segregation</span></span></span>
<span class="r-in"><span><span class="fu">mutual_total</span><span class="op">(</span><span class="va">schools00</span>, <span class="st">"race"</span>, <span class="st">"district"</span>, weight <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span> <span class="co"># M =&gt; .338</span></span></span>
<span class="r-in"><span><span class="co"># note that the sum of within-district and between-district</span></span></span>
<span class="r-in"><span><span class="co"># segregation equals total school-race segregation;</span></span></span>
<span class="r-in"><span><span class="co"># here, most segregation is between school districts</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://elbersb.com" class="external-link">Benjamin Elbers</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

